var t=require("process"),S="LOGVERSION 3";function c(o){global.main=async e=>{e.__ow_body!==void 0&&e.__ow_body!==null&&(e=Object.assign(JSON.parse(e.__ow_body),e));try{var r=await o(e)}catch(a){return console.log(a),console.log("SUCCEEDED false"),console.log(`MEMORY ${t.memoryUsage().rss}`),{statusCode:500,body:"Internal Server Error"}}var s=r.statusCode||200,n={statusCode:s,body:r.body};return console.log(S),console.log(`SUCCEEDED ${s>=200&&s<300}`),console.log(`MEMORY ${t.memoryUsage().rss}`),n}}var i=require("mysql");c(async o=>{let e=(0,i.createConnection)({host:o.SQL_HOST,user:o.SQL_USER,password:o.SQL_PASSWORD});return await new Promise((r,s)=>{e.connect(n=>{n?s(n):r()})}),await new Promise((r,s)=>{e.query("INSERT INTO incidents (error_name, stack_trace, version) VALUES (?, ?, ?)",[o.error_name,o.stack_trace,o.version],n=>{n?s(n):r()})}),{body:"Success"}});
