var n=require("process"),S="LOGVERSION 3";function t(e){global.main=async o=>{o.__ow_body!==void 0&&o.__ow_body!==null&&(o=Object.assign(JSON.parse(o.__ow_body),o));try{var r=await e(o)}catch(i){return console.log(i),console.log("SUCCEEDED false"),console.log(`MEMORY ${n.memoryUsage().rss}`),{statusCode:500,body:"Internal Server Error"}}var s=r.statusCode||200,a={statusCode:s,body:r.body};return console.log(S),console.log(`SUCCEEDED ${s>=200&&s<300}`),console.log(`MEMORY ${n.memoryUsage().rss}`),a}}var c=require("promise-mysql");t(async e=>(await(await(0,c.createConnection)({host:e.SQL_HOST,user:e.SQL_USER,password:e.SQL_PASSWORD})).query("INSERT INTO incidents (error_name, stack_trace, version) VALUES (?, ?, ?)",[e.error_name,e.stack_trace,e.version]),{body:"Success"}));
